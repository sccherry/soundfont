{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/zen-observable/index.js","webpack:///./node_modules/zen-observable/extras.js","webpack:///./node_modules/zen-observable/lib/Observable.js","webpack:///./src/scripts/lib/soundfont.worker.js","webpack:///./src/scripts/vendor/AudioContextMonkeyPatch.js","webpack:///./node_modules/zen-observable/lib/extras.js","webpack:///./src/scripts/lib/Observable/fromPromise.js","webpack:///./src/scripts/lib/Observable/withLatestFrom.js","webpack:///./src/scripts/lib/createSoundfont.js","webpack:///./src/scripts/lib/Envelope.js","webpack:///./src/scripts/lib/BufferSynth.js","webpack:///./src/scripts/lib/PolySynth.js","webpack:///./src/scripts/lib/getAudioContext.js","webpack:///./src/scripts/lib/toMessage.js","webpack:///./src/scripts/lib/Observable/fromEvent.js","webpack:///./src/scripts/lib/Observable/startWith.js","webpack:///./src/scripts/components/state.js","webpack:///./src/scripts/components/envelope.js","webpack:///./src/scripts/components/soundfont.js","webpack:///./src/scripts/lib/Util.js","webpack:///./src/scripts/components/octave.js","webpack:///./src/scripts/lib/Observable/distinctUntilChanged.js","webpack:///./src/scripts/components/keyboard.js","webpack:///./src/scripts/components/midi.js","webpack:///./src/scripts/lib/requestMIDIAccess.js","webpack:///./src/scripts/components/pianoRoll.js","webpack:///./src/scripts/bus.js","webpack:///./src/scripts/synth.js","webpack:///./src/scripts/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Observable","_createClass","defineProperties","target","props","length","descriptor","configurable","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","hasSymbols","hasSymbol","Boolean","getSymbol","observable","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","obj","getSpecies","ctor","constructor","undefined","isObservable","x","hostReportError","e","log","setTimeout","enqueue","fn","Promise","resolve","then","cleanupSubscription","subscription","cleanup","_cleanup","unsubscribe","closeSubscription","_observer","_queue","_state","notifySubscription","type","observer","onNotify","queue","flushSubscription","push","Subscription","subscriber","this","subscriptionObserver","SubscriptionObserver","error","_subscription","_subscriber","next","arguments","complete","_this","reject","subscribe","done","_this2","_this3","_this4","C","hasSeed","hasValue","seed","acc","first","_this5","_len","sources","Array","_key","index","startNext","v","from","_this6","subscriptions","outer","inner","indexOf","splice","completeIfDone","closed","forEach","method","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","item","err","return","isArray","_len2","items","_key2","symbol","Worker","__webpack_public_path__","global","perf","fixSetTarget","param","setTargetAtTime","setTargetValueAtTime","window","AudioContext","webkitAudioContext","createGain","createGainNode","createDelay","createDelayNode","createScriptProcessor","createJavaScriptNode","createPeriodicWave","createWaveTable","internal_createGain","node","gain","internal_createDelay","maxDelayTime","delayTime","internal_createBufferSource","createBufferSource","start","internal_start","when","offset","duration","noteGrainOn","noteOn","stop","internal_stop","noteOff","playbackRate","internal_createDynamicsCompressor","createDynamicsCompressor","threshold","knee","ratio","reduction","attack","release","internal_createBiquadFilter","createBiquadFilter","frequency","detune","Q","internal_createOscillator","createOscillator","setPeriodicWave","setWaveTable","OfflineAudioContext","webkitOfflineAudioContext","merge","_Observable","count","map","source","combineLatest","seen","Set","seenAll","values","add","size","zip","_len3","_key3","queues","some","q","every","shift","fromPromise","pr","toArray","iter","sort","y","withLatestFrom","Map","set","worker","soundfontToAudioBuffer","context","buffers","cache","decodeAudioData","buffer","all","audioBuffers","requestFromWorker","message","postMessage","handler","data","removeEventListener","errorHandler","addEventListener","Envelope","decay","sustain","time","currentTime","velocity","setValueAtTime","linearRampToValueAtTime","triggerAttack","triggerRelease","to","BufferSynth","envelope","connect","onended","disconnect","PolySynth","voice","Voice","notes","args","freqs","note","has","output","currenTime","createResumeAudioContext","el","resumeAudioContext","state","resume","console","data0","data1","status","Math","floor","channel","fromEvent","eventName","listener","startWith","form","document","querySelector","localStorage","getItem","JSON","parse","els","elements","keys","namedItem","checked","FormData","newState","setItem","stringify","parseFloat","soundfont","instrument","pitchToMIDI","octave","pitch","same","distinctUntilChanged","parseInt","KEYS","includes","list","toLowerCase","toNote","oct","shiftKey","keydown","filter","repeat","keyup","noteon","toMessage","noteoff","keyboard","midi","navigator","requestMIDIAccess","access","midiAccess","onstatechange","port","connection","inputs","flatMap","input","isSpaceOrEnter","keyCode","dataset","pianoRoll","preventDefault","setAttribute","bus","instrumentObservable","sf","createSoundfont","synth","destination","env","serviceWorker","register"],"mappings":"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","file":"scripts/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = require('./lib/Observable.js').Observable;\n","module.exports = require('./lib/extras.js');\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// === Symbol Support ===\n\nvar hasSymbols = function () {\n  return typeof Symbol === 'function';\n};\nvar hasSymbol = function (name) {\n  return hasSymbols() && Boolean(Symbol[name]);\n};\nvar getSymbol = function (name) {\n  return hasSymbol(name) ? Symbol[name] : '@@' + name;\n};\n\nif (hasSymbols() && !hasSymbol('observable')) {\n  Symbol.observable = Symbol('observable');\n}\n\nvar SymbolIterator = getSymbol('iterator');\nvar SymbolObservable = getSymbol('observable');\nvar SymbolSpecies = getSymbol('species');\n\n// === Abstract Operations ===\n\nfunction getMethod(obj, key) {\n  var value = obj[key];\n\n  if (value == null) return undefined;\n\n  if (typeof value !== 'function') throw new TypeError(value + ' is not a function');\n\n  return value;\n}\n\nfunction getSpecies(obj) {\n  var ctor = obj.constructor;\n  if (ctor !== undefined) {\n    ctor = ctor[SymbolSpecies];\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction isObservable(x) {\n  return x instanceof Observable; // SPEC: Brand check\n}\n\nfunction hostReportError(e) {\n  if (hostReportError.log) {\n    hostReportError.log(e);\n  } else {\n    setTimeout(function () {\n      throw e;\n    });\n  }\n}\n\nfunction enqueue(fn) {\n  Promise.resolve().then(function () {\n    try {\n      fn();\n    } catch (e) {\n      hostReportError(e);\n    }\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  var cleanup = subscription._cleanup;\n  if (cleanup === undefined) return;\n\n  subscription._cleanup = undefined;\n\n  if (!cleanup) {\n    return;\n  }\n\n  try {\n    if (typeof cleanup === 'function') {\n      cleanup();\n    } else {\n      var unsubscribe = getMethod(cleanup, 'unsubscribe');\n      if (unsubscribe) {\n        unsubscribe.call(cleanup);\n      }\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n}\n\nfunction closeSubscription(subscription) {\n  subscription._observer = undefined;\n  subscription._queue = undefined;\n  subscription._state = 'closed';\n}\n\nfunction flushSubscription(subscription) {\n  var queue = subscription._queue;\n  if (!queue) {\n    return;\n  }\n  subscription._queue = undefined;\n  subscription._state = 'ready';\n  for (var i = 0; i < queue.length; ++i) {\n    notifySubscription(subscription, queue[i].type, queue[i].value);\n    if (subscription._state === 'closed') break;\n  }\n}\n\nfunction notifySubscription(subscription, type, value) {\n  subscription._state = 'running';\n\n  var observer = subscription._observer;\n\n  try {\n    var m = getMethod(observer, type);\n    switch (type) {\n      case 'next':\n        if (m) m.call(observer, value);\n        break;\n      case 'error':\n        closeSubscription(subscription);\n        if (m) m.call(observer, value);else throw value;\n        break;\n      case 'complete':\n        closeSubscription(subscription);\n        if (m) m.call(observer);\n        break;\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscription._state === 'closed') cleanupSubscription(subscription);else if (subscription._state === 'running') subscription._state = 'ready';\n}\n\nfunction onNotify(subscription, type, value) {\n  if (subscription._state === 'closed') return;\n\n  if (subscription._state === 'buffering') {\n    subscription._queue.push({ type: type, value: value });\n    return;\n  }\n\n  if (subscription._state !== 'ready') {\n    subscription._state = 'buffering';\n    subscription._queue = [{ type: type, value: value }];\n    enqueue(function () {\n      return flushSubscription(subscription);\n    });\n    return;\n  }\n\n  notifySubscription(subscription, type, value);\n}\n\nvar Subscription = function () {\n  function Subscription(observer, subscriber) {\n    _classCallCheck(this, Subscription);\n\n    // ASSERT: observer is an object\n    // ASSERT: subscriber is callable\n\n    this._cleanup = undefined;\n    this._observer = observer;\n    this._queue = undefined;\n    this._state = 'initializing';\n\n    var subscriptionObserver = new SubscriptionObserver(this);\n\n    try {\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (this._state === 'initializing') this._state = 'ready';\n  }\n\n  _createClass(Subscription, [{\n    key: 'unsubscribe',\n    value: function unsubscribe() {\n      if (this._state !== 'closed') {\n        closeSubscription(this);\n        cleanupSubscription(this);\n      }\n    }\n  }, {\n    key: 'closed',\n    get: function () {\n      return this._state === 'closed';\n    }\n  }]);\n\n  return Subscription;\n}();\n\nvar SubscriptionObserver = function () {\n  function SubscriptionObserver(subscription) {\n    _classCallCheck(this, SubscriptionObserver);\n\n    this._subscription = subscription;\n  }\n\n  _createClass(SubscriptionObserver, [{\n    key: 'next',\n    value: function next(value) {\n      onNotify(this._subscription, 'next', value);\n    }\n  }, {\n    key: 'error',\n    value: function error(value) {\n      onNotify(this._subscription, 'error', value);\n    }\n  }, {\n    key: 'complete',\n    value: function complete() {\n      onNotify(this._subscription, 'complete');\n    }\n  }, {\n    key: 'closed',\n    get: function () {\n      return this._subscription._state === 'closed';\n    }\n  }]);\n\n  return SubscriptionObserver;\n}();\n\nvar Observable = exports.Observable = function () {\n  function Observable(subscriber) {\n    _classCallCheck(this, Observable);\n\n    if (!(this instanceof Observable)) throw new TypeError('Observable cannot be called as a function');\n\n    if (typeof subscriber !== 'function') throw new TypeError('Observable initializer must be a function');\n\n    this._subscriber = subscriber;\n  }\n\n  _createClass(Observable, [{\n    key: 'subscribe',\n    value: function subscribe(observer) {\n      if (typeof observer !== 'object' || observer === null) {\n        observer = {\n          next: observer,\n          error: arguments[1],\n          complete: arguments[2]\n        };\n      }\n      return new Subscription(observer, this._subscriber);\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(fn) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (typeof fn !== 'function') {\n          reject(new TypeError(fn + ' is not a function'));\n          return;\n        }\n\n        function done() {\n          subscription.unsubscribe();\n          resolve();\n        }\n\n        var subscription = _this.subscribe({\n          next: function (value) {\n            try {\n              fn(value, done);\n            } catch (e) {\n              reject(e);\n              subscription.unsubscribe();\n            }\n          },\n\n          error: reject,\n          complete: resolve\n        });\n      });\n    }\n  }, {\n    key: 'map',\n    value: function map(fn) {\n      var _this2 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n\n      var C = getSpecies(this);\n\n      return new C(function (observer) {\n        return _this2.subscribe({\n          next: function (value) {\n            try {\n              value = fn(value);\n            } catch (e) {\n              return observer.error(e);\n            }\n            observer.next(value);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'filter',\n    value: function filter(fn) {\n      var _this3 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n\n      var C = getSpecies(this);\n\n      return new C(function (observer) {\n        return _this3.subscribe({\n          next: function (value) {\n            try {\n              if (!fn(value)) return;\n            } catch (e) {\n              return observer.error(e);\n            }\n            observer.next(value);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'reduce',\n    value: function reduce(fn) {\n      var _this4 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n\n      var C = getSpecies(this);\n      var hasSeed = arguments.length > 1;\n      var hasValue = false;\n      var seed = arguments[1];\n      var acc = seed;\n\n      return new C(function (observer) {\n        return _this4.subscribe({\n          next: function (value) {\n            var first = !hasValue;\n            hasValue = true;\n\n            if (!first || hasSeed) {\n              try {\n                acc = fn(acc, value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            } else {\n              acc = value;\n            }\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            if (!hasValue && !hasSeed) return observer.error(new TypeError('Cannot reduce an empty sequence'));\n\n            observer.next(acc);\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'concat',\n    value: function concat() {\n      var _this5 = this;\n\n      for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n        sources[_key] = arguments[_key];\n      }\n\n      var C = getSpecies(this);\n\n      return new C(function (observer) {\n        var subscription = void 0;\n        var index = 0;\n\n        function startNext(next) {\n          subscription = next.subscribe({\n            next: function (v) {\n              observer.next(v);\n            },\n            error: function (e) {\n              observer.error(e);\n            },\n            complete: function () {\n              if (index === sources.length) {\n                subscription = undefined;\n                observer.complete();\n              } else {\n                startNext(C.from(sources[index++]));\n              }\n            }\n          });\n        }\n\n        startNext(_this5);\n\n        return function () {\n          if (subscription) {\n            subscription.unsubscribe();\n            subscription = undefined;\n          }\n        };\n      });\n    }\n  }, {\n    key: 'flatMap',\n    value: function flatMap(fn) {\n      var _this6 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n\n      var C = getSpecies(this);\n\n      return new C(function (observer) {\n        var subscriptions = [];\n\n        var outer = _this6.subscribe({\n          next: function (value) {\n            if (fn) {\n              try {\n                value = fn(value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            }\n\n            var inner = C.from(value).subscribe({\n              next: function (value) {\n                observer.next(value);\n              },\n              error: function (e) {\n                observer.error(e);\n              },\n              complete: function () {\n                var i = subscriptions.indexOf(inner);\n                if (i >= 0) subscriptions.splice(i, 1);\n                completeIfDone();\n              }\n            });\n\n            subscriptions.push(inner);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            completeIfDone();\n          }\n        });\n\n        function completeIfDone() {\n          if (outer.closed && subscriptions.length === 0) observer.complete();\n        }\n\n        return function () {\n          subscriptions.forEach(function (s) {\n            return s.unsubscribe();\n          });\n          outer.unsubscribe();\n        };\n      });\n    }\n  }, {\n    key: SymbolObservable,\n    value: function () {\n      return this;\n    }\n  }], [{\n    key: 'from',\n    value: function from(x) {\n      var C = typeof this === 'function' ? this : Observable;\n\n      if (x == null) throw new TypeError(x + ' is not an object');\n\n      var method = getMethod(x, SymbolObservable);\n      if (method) {\n        var observable = method.call(x);\n\n        if (Object(observable) !== observable) throw new TypeError(observable + ' is not an object');\n\n        if (isObservable(observable) && observable.constructor === C) return observable;\n\n        return new C(function (observer) {\n          return observable.subscribe(observer);\n        });\n      }\n\n      if (hasSymbol('iterator')) {\n        method = getMethod(x, SymbolIterator);\n        if (method) {\n          return new C(function (observer) {\n            enqueue(function () {\n              if (observer.closed) return;\n              var _iteratorNormalCompletion = true;\n              var _didIteratorError = false;\n              var _iteratorError = undefined;\n\n              try {\n                for (var _iterator = method.call(x)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  var item = _step.value;\n\n                  observer.next(item);\n                  if (observer.closed) return;\n                }\n              } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                  }\n                } finally {\n                  if (_didIteratorError) {\n                    throw _iteratorError;\n                  }\n                }\n              }\n\n              observer.complete();\n            });\n          });\n        }\n      }\n\n      if (Array.isArray(x)) {\n        return new C(function (observer) {\n          enqueue(function () {\n            if (observer.closed) return;\n            for (var i = 0; i < x.length; ++i) {\n              observer.next(x[i]);\n              if (observer.closed) return;\n            }\n            observer.complete();\n          });\n        });\n      }\n\n      throw new TypeError(x + ' is not observable');\n    }\n  }, {\n    key: 'of',\n    value: function of() {\n      for (var _len2 = arguments.length, items = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        items[_key2] = arguments[_key2];\n      }\n\n      var C = typeof this === 'function' ? this : Observable;\n\n      return new C(function (observer) {\n        enqueue(function () {\n          if (observer.closed) return;\n          for (var i = 0; i < items.length; ++i) {\n            observer.next(items[i]);\n            if (observer.closed) return;\n          }\n          observer.complete();\n        });\n      });\n    }\n  }, {\n    key: SymbolSpecies,\n    get: function () {\n      return this;\n    }\n  }]);\n\n  return Observable;\n}();\n\nif (hasSymbols()) {\n  Object.defineProperty(Observable, Symbol('extensions'), {\n    value: {\n      symbol: SymbolObservable,\n      hostReportError: hostReportError\n    },\n    configurable: true\n  });\n}","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"js/f354bf24618a272f02eb.worker.js\");\n};","/* Copyright 2013 Chris Wilson\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n/*\n\nThis monkeypatch library is intended to be included in projects that are\nwritten to the proper AudioContext spec (instead of webkitAudioContext),\nand that use the new naming and proper bits of the Web Audio API (e.g.\nusing BufferSourceNode.start() instead of BufferSourceNode.noteOn()), but may\nhave to run on systems that only support the deprecated bits.\n\nThis library should be harmless to include if the browser supports\nunprefixed \"AudioContext\", and/or if it supports the new names.\n\nThe patches this library handles:\nif window.AudioContext is unsupported, it will be aliased to webkitAudioContext().\nif AudioBufferSourceNode.start() is unimplemented, it will be routed to noteOn() or\nnoteGrainOn(), depending on parameters.\n\nThe following aliases only take effect if the new names are not already in place:\n\nAudioBufferSourceNode.stop() is aliased to noteOff()\nAudioContext.createGain() is aliased to createGainNode()\nAudioContext.createDelay() is aliased to createDelayNode()\nAudioContext.createScriptProcessor() is aliased to createJavaScriptNode()\nAudioContext.createPeriodicWave() is aliased to createWaveTable()\nOscillatorNode.start() is aliased to noteOn()\nOscillatorNode.stop() is aliased to noteOff()\nOscillatorNode.setPeriodicWave() is aliased to setWaveTable()\nAudioParam.setTargetAtTime() is aliased to setTargetValueAtTime()\n\nThis library does NOT patch the enumerated type changes, as it is\nrecommended in the specification that implementations support both integer\nand string types for AudioPannerNode.panningModel, AudioPannerNode.distanceModel\nBiquadFilterNode.type and OscillatorNode.type.\n\n*/\n(function (global, exports, perf) {\n  'use strict';\n\n  function fixSetTarget(param) {\n    if (!param)\t// if NYI, just return\n      return;\n    if (!param.setTargetAtTime)\n      param.setTargetAtTime = param.setTargetValueAtTime;\n  }\n\n  if (window.hasOwnProperty('webkitAudioContext') &&\n      !window.hasOwnProperty('AudioContext')) {\n    window.AudioContext = webkitAudioContext;\n\n    if (!AudioContext.prototype.hasOwnProperty('createGain'))\n      AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n    if (!AudioContext.prototype.hasOwnProperty('createDelay'))\n      AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n    if (!AudioContext.prototype.hasOwnProperty('createScriptProcessor'))\n      AudioContext.prototype.createScriptProcessor = AudioContext.prototype.createJavaScriptNode;\n    if (!AudioContext.prototype.hasOwnProperty('createPeriodicWave'))\n      AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n\n\n    AudioContext.prototype.internal_createGain = AudioContext.prototype.createGain;\n    AudioContext.prototype.createGain = function() {\n      var node = this.internal_createGain();\n      fixSetTarget(node.gain);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createDelay = AudioContext.prototype.createDelay;\n    AudioContext.prototype.createDelay = function(maxDelayTime) {\n      var node = maxDelayTime ? this.internal_createDelay(maxDelayTime) : this.internal_createDelay();\n      fixSetTarget(node.delayTime);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createBufferSource = AudioContext.prototype.createBufferSource;\n    AudioContext.prototype.createBufferSource = function() {\n      var node = this.internal_createBufferSource();\n      if (!node.start) {\n        node.start = function ( when, offset, duration ) {\n          if ( offset || duration )\n            this.noteGrainOn( when || 0, offset, duration );\n          else\n            this.noteOn( when || 0 );\n        };\n      } else {\n        node.internal_start = node.start;\n        node.start = function( when, offset, duration ) {\n          if( typeof duration !== 'undefined' )\n            node.internal_start( when || 0, offset, duration );\n          else\n            node.internal_start( when || 0, offset || 0 );\n        };\n      }\n      if (!node.stop) {\n        node.stop = function ( when ) {\n          this.noteOff( when || 0 );\n        };\n      } else {\n        node.internal_stop = node.stop;\n        node.stop = function( when ) {\n          node.internal_stop( when || 0 );\n        };\n      }\n      fixSetTarget(node.playbackRate);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createDynamicsCompressor = AudioContext.prototype.createDynamicsCompressor;\n    AudioContext.prototype.createDynamicsCompressor = function () {\n      const node = this.internal_createDynamicsCompressor();\n      fixSetTarget(node.threshold);\n      fixSetTarget(node.knee);\n      fixSetTarget(node.ratio);\n      fixSetTarget(node.reduction);\n      fixSetTarget(node.attack);\n      fixSetTarget(node.release);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createBiquadFilter = AudioContext.prototype.createBiquadFilter;\n    AudioContext.prototype.createBiquadFilter = function () {\n      const node = this.internal_createBiquadFilter();\n      fixSetTarget(node.frequency);\n      fixSetTarget(node.detune);\n      fixSetTarget(node.Q);\n      fixSetTarget(node.gain);\n      return node;\n    };\n\n    if (AudioContext.prototype.hasOwnProperty('createOscillator')) {\n      AudioContext.prototype.internal_createOscillator = AudioContext.prototype.createOscillator;\n      AudioContext.prototype.createOscillator = function () {\n        const node = this.internal_createOscillator();\n        if (!node.start) {\n          node.start = function (when) {\n            this.noteOn(when || 0);\n          };\n        } else {\n          node.internal_start = node.start;\n          node.start = function (when) {\n            node.internal_start(when || 0);\n          };\n        }\n        if (!node.stop) {\n          node.stop = function (when) {\n            this.noteOff(when || 0);\n          };\n        } else {\n          node.internal_stop = node.stop;\n          node.stop = function (when) {\n            node.internal_stop(when || 0);\n          };\n        }\n        if (!node.setPeriodicWave) { node.setPeriodicWave = node.setWaveTable; }\n        fixSetTarget(node.frequency);\n        fixSetTarget(node.detune);\n        return node;\n      };\n    }\n  }\n\n  if (window.hasOwnProperty('webkitOfflineAudioContext') &&\n      !window.hasOwnProperty('OfflineAudioContext')) {\n    window.OfflineAudioContext = webkitOfflineAudioContext;\n  }\n}(window));\n\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.merge = merge;\nexports.combineLatest = combineLatest;\nexports.zip = zip;\n\nvar _Observable = require('./Observable.js');\n\n// Emits all values from all inputs in parallel\nfunction merge() {\n  for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  return new _Observable.Observable(function (observer) {\n    if (sources.length === 0) return _Observable.Observable.from([]);\n\n    var count = sources.length;\n\n    var subscriptions = sources.map(function (source) {\n      return _Observable.Observable.from(source).subscribe({\n        next: function (v) {\n          observer.next(v);\n        },\n        error: function (e) {\n          observer.error(e);\n        },\n        complete: function () {\n          if (--count === 0) observer.complete();\n        }\n      });\n    });\n\n    return function () {\n      return subscriptions.forEach(function (s) {\n        return s.unsubscribe();\n      });\n    };\n  });\n}\n\n// Emits arrays containing the most current values from each input\nfunction combineLatest() {\n  for (var _len2 = arguments.length, sources = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    sources[_key2] = arguments[_key2];\n  }\n\n  return new _Observable.Observable(function (observer) {\n    if (sources.length === 0) return _Observable.Observable.from([]);\n\n    var count = sources.length;\n    var seen = new Set();\n    var seenAll = false;\n    var values = sources.map(function () {\n      return undefined;\n    });\n\n    var subscriptions = sources.map(function (source, index) {\n      return _Observable.Observable.from(source).subscribe({\n        next: function (v) {\n          values[index] = v;\n\n          if (!seenAll) {\n            seen.add(index);\n            if (seen.size !== sources.length) return;\n\n            seen = null;\n            seenAll = true;\n          }\n\n          observer.next(Array.from(values));\n        },\n        error: function (e) {\n          observer.error(e);\n        },\n        complete: function () {\n          if (--count === 0) observer.complete();\n        }\n      });\n    });\n\n    return function () {\n      return subscriptions.forEach(function (s) {\n        return s.unsubscribe();\n      });\n    };\n  });\n}\n\n// Emits arrays containing the matching index values from each input\nfunction zip() {\n  for (var _len3 = arguments.length, sources = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    sources[_key3] = arguments[_key3];\n  }\n\n  return new _Observable.Observable(function (observer) {\n    if (sources.length === 0) return _Observable.Observable.from([]);\n\n    var queues = sources.map(function () {\n      return [];\n    });\n\n    function done() {\n      return queues.some(function (q, i) {\n        return q.length === 0 && subscriptions[i].closed;\n      });\n    }\n\n    var subscriptions = sources.map(function (source, index) {\n      return _Observable.Observable.from(source).subscribe({\n        next: function (v) {\n          queues[index].push(v);\n          if (queues.every(function (q) {\n            return q.length > 0;\n          })) {\n            observer.next(queues.map(function (q) {\n              return q.shift();\n            }));\n            if (done()) observer.complete();\n          }\n        },\n        error: function (e) {\n          observer.error(e);\n        },\n        complete: function () {\n          if (done()) observer.complete();\n        }\n      });\n    });\n\n    return function () {\n      return subscriptions.forEach(function (s) {\n        return s.unsubscribe();\n      });\n    };\n  });\n}","import Observable from 'zen-observable';\n\nconst fromPromise = pr => new Observable((observer) => {\n  pr.then((value) => {\n    observer.next(value);\n    observer.complete();\n  }).catch((err) => {\n    observer.error(err);\n  });\n});\n\nexport default fromPromise;\n","import Observable from 'zen-observable';\n\nconst toArray = iter => Array.from(iter)\n  .sort((x, y) => x[0] - y[0])\n  .map(x => x[1]);\n\nconst withLatestFrom = (...sources) => new Observable((observer) => {\n  if (sources.length === 0) {\n    return Observable.from([]);\n  }\n\n  let count = sources.length;\n  const values = new Map();\n\n  const subscriptions = sources.map((source, index) => Observable.from(source).subscribe({\n    next(v) {\n      values.set(index, v);\n      if (values.size === sources.length && index === 0) {\n        observer.next(toArray(values));\n      }\n    },\n    error(e) {\n      observer.error(e);\n    },\n    complete() {\n      count -= 1;\n\n      if (count === 0) {\n        observer.complete();\n      }\n    },\n  }));\n\n  return () => subscriptions.forEach(s => s.unsubscribe());\n});\n\nexport default withLatestFrom;\n","import Worker from './soundfont.worker';\n\nconst worker = new Worker();\n\nfunction soundfontToAudioBuffer({ context, buffers }) {\n  const cache = [];\n\n  buffers.forEach((value, key) => {\n    cache.push(\n      context.decodeAudioData(value).then((buffer) => {\n        return [key, buffer];\n      }),\n    );\n  });\n\n  return Promise.all(cache).then((audioBuffers) => new Map(audioBuffers));\n}\n\nfunction requestFromWorker(message) {\n  worker.postMessage(message);\n\n  return new Promise((resolve, reject) => {\n    function handler(e) {\n      resolve(e.data);\n      worker.removeEventListener('message', handler);\n      // eslint-disable-next-line no-use-before-define\n      worker.removeEventListener('error', errorHandler);\n    }\n\n    function errorHandler(e) {\n      reject(e.message);\n      worker.removeEventListener('message', handler);\n      worker.removeEventListener('error', errorHandler);\n    }\n\n    worker.addEventListener('message', handler);\n    worker.addEventListener('error', errorHandler);\n  });\n}\n\nexport default function(context, instrument = 'acoustic_grand_piano', soundfont = 'FluidR3_GM') {\n  return requestFromWorker({ instrument, soundfont }).then((buffers) => {\n    return soundfontToAudioBuffer({ context, buffers });\n  });\n}\n","class Envelope {\n  constructor(context, { attack = 0.01, decay = 0.1, sustain = 0.5, release = 1 }) {\n    this.context = context;\n    this.param = null;\n    this.attack = attack;\n    this.decay = decay;\n    this.sustain = sustain;\n    this.release = release;\n  }\n\n  triggerAttack(time = this.context.currentTime, velocity = 1) {\n    if (this.param !== null) {\n      this.param.setValueAtTime(0, time);\n      this.param.linearRampToValueAtTime(velocity, time + this.attack);\n      this.param.linearRampToValueAtTime(velocity * this.sustain, time + this.attack + this.decay);\n    }\n\n    return this;\n  }\n\n  triggerRelease(time = this.context.currentTime) {\n    if (this.param !== null) {\n      this.param.linearRampToValueAtTime(0, time + this.release);\n    }\n\n    return this;\n  }\n\n  triggerAttackRelease(duration, time = this.context.currentTime, velocity = 1) {\n    this.triggerAttack(time, velocity);\n    this.triggerRelease(time + duration);\n\n    return this;\n  }\n\n  connect(to) {\n    this.param = to;\n\n    return this;\n  }\n\n  disconnect() {\n    this.param = null;\n\n    return this;\n  }\n}\n\nexport default Envelope;\n","import Envelope from './Envelope';\n\nclass BufferSynth {\n  constructor(context, { envelope }) {\n    this.context = context;\n    this.gain = this.context.createGain();\n    this.envelope = new Envelope(this.context, envelope);\n    this.envelope.connect(this.gain.gain);\n  }\n\n  triggerAttack(buffer, time = this.context.currentTime, velocity = 1) {\n    if (!this.source) {\n      this.source = this.context.createBufferSource();\n      this.source.connect(this.gain);\n      this.source.buffer = buffer;\n\n      this.envelope.triggerAttack(time, velocity);\n      this.source.start(time);\n    }\n\n    return this;\n  }\n\n  triggerRelease(time = this.context.currentTime) {\n    if (this.source) {\n      this.source.onended = () => {\n        this.source.disconnect();\n        this.source = null;\n      };\n\n      this.envelope.triggerRelease(time);\n      this.source.stop(time + this.envelope.release);\n    }\n\n    return this;\n  }\n\n  connect(to) {\n    this.gain.connect(to);\n\n    return this;\n  }\n\n  disconnect(from) {\n    this.gain.disconnect(from);\n\n    return this;\n  }\n}\n\nexport default BufferSynth;\n","class PolySynth {\n  constructor(context, voice) {\n    this.context = context;\n    this.Voice = voice;\n    this.cache = new Map();\n  }\n\n  triggerAttack(notes, time = this.context.currentTime, velocity, buffer, ...args) {\n    const freqs = Array.isArray(notes) ? notes : [notes];\n\n    freqs.forEach((note) => {\n      if (!this.cache.has(note)) {\n        const voice = new this.Voice(this.context, ...args).connect(this.output);\n\n        this.cache.set(note, voice);\n        voice.triggerAttack(buffer, time, velocity / 127);\n      }\n    });\n\n    return this;\n  }\n\n  triggerRelease(notes, time = this.context.currentTime) {\n    const freqs = Array.isArray(notes) ? notes : [notes];\n\n    freqs.forEach((note) => {\n      if (this.cache.has(note)) {\n        const voice = this.cache.get(note);\n\n        voice.triggerRelease(time);\n\n        this.cache.delete(note);\n      }\n    });\n\n    return this;\n  }\n\n  triggerAttackRelease(notes, duration, time = this.context.currenTime, velocity = 1) {\n    this.triggerAttack(notes, time, velocity);\n    this.triggerRelease(notes, time + duration);\n    return this;\n  }\n\n  connect(to) {\n    this.output = to;\n\n    return this;\n  }\n\n  disconnect() {\n    this.output = null;\n\n    return this;\n  }\n}\n\nexport default PolySynth;\n","import '../vendor/AudioContextMonkeyPatch';\n\nlet context = null;\n\nfunction createResumeAudioContext(el, type) {\n  function resumeAudioContext() {\n    if (context === null) {\n      return;\n    }\n\n    el.removeEventListener(type, resumeAudioContext);\n\n    if (context.state !== 'suspended') {\n      return;\n    }\n\n    context.resume().then(() => {\n      // eslint-disable-next-line no-console\n      console.log('Audio context resumed');\n    });\n  }\n\n  el.addEventListener(type, resumeAudioContext, false);\n}\n\ncreateResumeAudioContext(window, 'mousedown');\ncreateResumeAudioContext(window, 'touchstart');\n\nexport default function() {\n  if (context === null) {\n    context = new AudioContext();\n  }\n\n  return context;\n}\n","// https://www.midi.org/specifications-old/item/table-1-summary-of-midi-message\nexport const NOTE_OFF = 8;\nexport const NOTE_ON = 9;\nexport const POLYPHONIC_KEY_PRESSURE = 10;\nexport const CONTROL_CHANGE = 11;\nexport const PROGRAM_CHANGE = 12;\nexport const CHANNEL_PRESSURE = 13;\nexport const PITCH_BEND = 14;\n\nexport default function(message, data0, data1) {\n  const status = Math.floor(message / 16);\n  const channel = message % 16;\n\n  if (status === NOTE_OFF || (status === NOTE_ON && data1 === 0)) {\n    return {\n      status,\n      channel,\n      note: data0,\n      velocity: data1,\n    };\n  }\n  if (status === NOTE_ON) {\n    return {\n      status,\n      channel,\n      note: data0,\n      velocity: data1,\n    };\n  }\n  if (status === PITCH_BEND) {\n    // data0 is coarse detune, data1 is fine detune, center pitch is 2000 HZ\n    // 8192 is Math.pow(2, 13)\n    return {\n      status,\n      channel,\n      value: (data1 * 128.0 + data0 - 8192) / 8192.0,\n    };\n  }\n  return {\n    status,\n    channel,\n    data0,\n    data1,\n  };\n}\n","import Observable from 'zen-observable';\n\nconst fromEvent = (target, eventName) => new Observable((observer) => {\n  const listener = e => observer.next(e);\n\n  target.addEventListener(eventName, listener);\n\n  return () => target.removeEventListener(eventName, listener);\n});\n\nexport default fromEvent;\n","import Observable from 'zen-observable';\n\nconst startWith = (source, value) => new Observable((observer) => {\n  observer.next(value);\n\n  const subscription = source.subscribe({\n    next(v) {\n      observer.next(v);\n    },\n    error(e) {\n      observer.error(e);\n    },\n    complete() {\n      observer.complete();\n    },\n  });\n\n  return () => subscription.unsubscribe();\n});\n\nexport default startWith;\n","import fromEvent from '../lib/Observable/fromEvent';\nimport startWith from '../lib/Observable/startWith';\n\nconst form = document.querySelector('form');\nconst storage = 'soundfont';\n\n// Load initial state\nif (localStorage.getItem(storage)) {\n  const data = JSON.parse(localStorage.getItem(storage));\n  const els = form.elements;\n\n  Object.keys(data).forEach((key) => {\n    const el = els.namedItem(key);\n\n    if (el.type === 'checkbox') {\n      const checked = data[key] === 'on';\n      el.checked = checked;\n    } else {\n      el.value = data[key];\n    }\n  });\n}\n\nconst state = startWith(fromEvent(form, 'change'), new FormData(form)).map(\n  () => new FormData(form),\n);\n\nexport default state;\n\nstate.subscribe((data) => {\n  const newState = {};\n\n  data.forEach((value, key) => {\n    newState[key] = value;\n  });\n\n  localStorage.setItem(storage, JSON.stringify(newState));\n});\n","import state from './state';\n\nconst envelope = state.map((data) => ({\n  attack: parseFloat(data.get('envelope-attack')),\n  decay: parseFloat(data.get('envelope-decay')),\n  sustain: parseFloat(data.get('envelope-sustain')),\n  release: parseFloat(data.get('envelope-release')),\n}));\n\nexport default envelope;\n","import state from './state';\n\nconst soundfont = state.map((data) => ({\n  instrument: data.get('instrument'),\n  soundfont: data.get('soundfont'),\n}));\n\nexport default soundfont;\n","const PITCH_CLASSES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\n\nexport const clamp = (value, min, max) => {\n  return Math.min(Math.max(value, min), max);\n};\n\nexport const decodeBase64 = (base64) => {\n  const raw = atob(base64);\n  const len = raw.length;\n  const bytes = new Uint8Array(len);\n\n  for (let i = 0; i < len; i += 1) {\n    bytes[i] = raw.charCodeAt(i);\n  }\n\n  return bytes.buffer;\n};\n\nexport const pitchToMIDI = (octave, pitch) => (12 * octave) + pitch;\n\nexport const noteToMIDI = (note) => {\n  const octave = parseInt(note.slice(-1), 10) + 1;\n  const pitch = PITCH_CLASSES.indexOf(note.slice(0, note.length - 1));\n\n  return pitchToMIDI(octave, pitch);\n};\n\nconst Util = {\n  clamp,\n  decodeBase64,\n  pitchToMIDI,\n  noteToMIDI,\n};\n\nexport default Util;\n","import distinctUntilChanged from '../lib/Observable/distinctUntilChanged';\nimport state from './state';\n\nconst octave = distinctUntilChanged(\n  state.map((data) => parseInt(data.get('octave'), 10)),\n);\n\nexport default octave;\n","import Observable from 'zen-observable';\n\nconst distinctUntilChanged = source => new Observable((observer) => {\n  let value;\n\n  const subscription = source.subscribe({\n    next(v) {\n      const same = value === v;\n      value = v;\n\n      if (!same) {\n        observer.next(v);\n      }\n    },\n    error(e) {\n      observer.error(e);\n    },\n    complete() {\n      observer.complete();\n    },\n  });\n\n  return () => subscription.unsubscribe();\n});\n\nexport default distinctUntilChanged;\n","import { merge } from 'zen-observable/extras';\nimport fromEvent from '../lib/Observable/fromEvent';\nimport withLatestFrom from '../lib/Observable/withLatestFrom';\nimport { pitchToMIDI } from '../lib/Util';\nimport toMessage from '../lib/toMessage';\nimport octave from './octave';\n\nconst KEYS = 'awsedftgyhujk';\n\nconst includes = list => e => list.includes(e.key.toLowerCase());\n\nconst toNote = ([e, oct]) => {\n  const index = KEYS.indexOf(e.key.toLowerCase());\n  const note = pitchToMIDI(e.shiftKey ? oct + 1 : oct, index);\n\n  return note;\n};\n\nconst keydown = fromEvent(document, 'keydown').filter(e => !e.repeat);\nconst keyup = fromEvent(document, 'keyup');\n\nconst noteon = withLatestFrom(keydown.filter(includes(KEYS)), octave)\n  .map(toNote)\n  .map((note) => toMessage(144, note, 127));\n\nconst noteoff = withLatestFrom(keyup.filter(includes(KEYS)), octave)\n  .map(toNote)\n  .map((note) => toMessage(128, note, 0));\n\nconst keyboard = merge(noteon, noteoff);\n\nexport default keyboard;\n","import Observable from 'zen-observable';\nimport fromEvent from '../lib/Observable/fromEvent';\nimport requestMIDIAccess from '../lib/requestMIDIAccess';\nimport toMessage from '../lib/toMessage';\n\nconst inputDevices = requestMIDIAccess().map(access => access.inputs);\n\nconst midi = inputDevices\n  .flatMap(inputs => Observable.from(Array.from(inputs.values())))\n  .flatMap(input => fromEvent(input, 'midimessage'))\n  .map(e => toMessage(...e.data));\n\nexport default midi;\n","import Observable from 'zen-observable';\n\nconst requestMIDIAccess = () => new Observable((observer) => {\n  if (navigator.requestMIDIAccess === undefined) {\n    observer.complete();\n  } else {\n    navigator.requestMIDIAccess().then((access) => {\n      const midiAccess = access;\n\n      observer.next(midiAccess);\n\n      midiAccess.onstatechange = (e) => {\n        if (e.port.connection !== 'open') {\n          observer.next(e.target);\n        }\n      };\n    }).catch((err) => {\n      observer.error(err);\n    });\n  }\n});\n\nexport default requestMIDIAccess;\n","import { merge } from 'zen-observable/extras';\nimport fromEvent from '../lib/Observable/fromEvent';\nimport withLatestFrom from '../lib/Observable/withLatestFrom';\nimport { pitchToMIDI } from '../lib/Util';\nimport toMessage from '../lib/toMessage';\nimport octave from './octave';\n\nconst el = document.querySelector('.piano-roll');\n\nconst isSpaceOrEnter = keyCode => keyCode === 32 || keyCode === 13;\n\nconst toNote = ([e, oct]) => pitchToMIDI(oct, parseInt(e.target.dataset.note, 10));\n\nconst noteon = merge(\n  fromEvent(el, 'mousedown'),\n  fromEvent(el, 'touchstart'),\n  fromEvent(el, 'keydown')\n    .filter(e => !e.repeat)\n    .filter(e => isSpaceOrEnter(e.keyCode)),\n);\n\nconst noteoff = merge(\n  fromEvent(el, 'mouseup'),\n  fromEvent(el, 'touchend'),\n  fromEvent(el, 'keyup').filter(e => isSpaceOrEnter(e.keyCode)),\n);\n\nconst pianoRoll = merge(\n  withLatestFrom(noteon, octave)\n    .map(toNote)\n    .map((note) => toMessage(144, note, 127)),\n  withLatestFrom(noteoff, octave)\n    .map(toNote)\n    .map((note) => toMessage(128, note, 0)),\n);\n\nexport default pianoRoll;\n\nnoteon.subscribe((e) => {\n  e.preventDefault();\n  e.target.setAttribute('aria-pressed', 'true');\n});\n\nnoteoff.subscribe((e) => {\n  e.preventDefault();\n  e.target.setAttribute('aria-pressed', 'false');\n});\n","import { merge } from 'zen-observable/extras';\n\nimport keyboard from './components/keyboard';\nimport midi from './components/midi';\nimport pianoRoll from './components/pianoRoll';\n\nconst bus = merge(keyboard, pianoRoll, midi);\n\nexport default bus;\n","import fromPromise from './lib/Observable/fromPromise';\nimport withLatestFrom from './lib/Observable/withLatestFrom';\nimport createSoundfont from './lib/createSoundfont';\nimport BufferSynth from './lib/BufferSynth';\nimport PolySynth from './lib/PolySynth';\nimport getAudioContext from './lib/getAudioContext';\nimport { NOTE_ON, NOTE_OFF } from './lib/toMessage';\nimport envelope from './components/envelope';\nimport soundfont from './components/soundfont';\nimport bus from './bus';\n\nconst context = getAudioContext();\n\nconst instrumentObservable = soundfont.flatMap(({ soundfont: sf, instrument }) =>\n  fromPromise(createSoundfont(context, instrument, sf)),\n);\n\nconst synth = new PolySynth(context, BufferSynth).connect(context.destination);\n\nwithLatestFrom(bus, instrumentObservable, envelope).subscribe(([message, sf, env]) => {\n  const { status } = message;\n\n  /* eslint-disable default-case */\n  switch (status) {\n    case NOTE_ON: {\n      const { note, velocity } = message;\n      synth.triggerAttack(note, context.currentTime, velocity, sf.get(note), { envelope: env });\n      break;\n    }\n    case NOTE_OFF: {\n      const { note } = message;\n      synth.triggerRelease(note);\n      break;\n    }\n  }\n  /* eslint-enable */\n});\n","import './app';\nimport '../styles/main.css';\n\n/* eslint-disable compat/compat */\nif (navigator.serviceWorker !== undefined) {\n  navigator.serviceWorker.register('./service-worker.js');\n}\n/* eslint-enable */\n"],"sourceRoot":""}