!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=1)}([function(n,e){n.exports=["FluidR3_GM","MusyngKite","FatBoy"]},function(n,e,t){"use strict";t.r(e);var r,o,u,i=t(0),s=t.n(i),c=(r="soundfont",o=1,u={upgrade:function(n){s.a.forEach(function(e){n.createObjectStore(e)})}}.upgrade,new Promise(function(n,e){var t=indexedDB.open(r,o);t.onupgradeneeded=function(n){u(t.result,n.oldVersion,n.newVersion,t.transaction)},t.onerror=function(n){e(n.target.result)},t.onsuccess=function(e){n(e.target.result)}})),a=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.method,r=void 0===t?"GET":t,o=e.responseType,u=void 0===o?"text":o;return new Promise(function(e,t){var o=new XMLHttpRequest;o.responseType=u,o.open(r,n),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?e(o.response):t(o.response))},o.send()})},f=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],d=function(n){for(var e=atob(n),t=e.length,r=new Uint8Array(t),o=0;o<t;o+=1)r[o]=e.charCodeAt(o);return r.buffer},l=function(n,e){return 12*n+e},p=function(n){var e=parseInt(n.slice(-1),10)+1,t=f.indexOf(n.slice(0,n.length-1));return l(e,t)};function b(n){return a(function({soundfont:n="FluidR3_GM",instrument:e="acoustic_grand_piano",format:t="mp3"}){return`https://gleitz.github.io/midi-js-soundfonts/${n}/${e}-${t}.js`}(n)).then(n=>(function(n){let e=n.indexOf("MIDI.Soundfont.");e=n.indexOf("=",e)+2;const t=n.lastIndexOf(",");return JSON.parse(`${n.slice(e,t)}}`)})(n))}const y=(g=({key:n,storeName:e})=>b({instrument:n,soundfont:e}).then(n=>(function(n){const e=new Map;return n.forEach((n,t)=>{const r=n.split(",")[1];e.set(p(t),d(r))}),e})(function(n){return new Map(Object.entries(n))}(n))),function n(e){var t=e.storeName,r=e.key;return c.then(function(n){return function(n,e,t){return new Promise(function(r,o){var u=n.transaction([e],"readonly").objectStore(e).get(t);u.onsuccess=function(n){r(n.target.result)},u.onerror=function(n){o(n.target.result)}})}(n,t,r)}).then(function(e){return e||g({storeName:t,key:r}).then(function(n){return c.then(function(e){return function(n,e,t,r){return new Promise(function(o,u){var i=n.transaction([e],"readwrite"),s=i.objectStore(e);i.oncomplete=function(n){o(n)},i.onerror=function(n){u(n)},s.add(r,t)})}(e,t,r,n)})}).then(function(){return n({storeName:t,key:r})})})});var g;onmessage=function(n){const{instrument:e,soundfont:t}=n.data;y({storeName:t,key:e}).then(n=>{postMessage(n)})}}]);
//# sourceMappingURL=f354bf24618a272f02eb.worker.js.map